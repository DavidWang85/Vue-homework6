{"version":3,"file":"js/501.d37dbc51.js","mappings":"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","sources":["webpack://week6-homework/./node_modules/mitt/dist/mitt.mjs","webpack://week6-homework/./src/libs/emitter.js","webpack://week6-homework/./src/views/CartView.vue","webpack://week6-homework/./src/views/CartView.vue?73a2"],"sourcesContent":["export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import mitt from 'mitt'\nconst emitter = mitt()\nexport default emitter\n","<template>\n  <div class=\"container\">\n    <h2>購物車</h2>\n  <table class=\"table align-middle\">\n    <thead>\n      <tr>\n        <th>圖片</th>\n        <th>商品名稱</th>\n        <th>價格</th>\n        <th></th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"product in products\" :key=\"product.id\">\n        <td style=\"width: 200px\">\n          <!-- 用style綁定背景圖 -->\n          <div\n            :style=\"{ backgroundImage: `url(${product.imageUrl})` }\"\n            style=\"\n              height: 100px;\n              background-size: cover;\n              background-position: center;\n            \"\n          ></div>\n        </td>\n        <td>\n          {{ product.title }}\n        </td>\n        <td>\n          <!-- 用v-if顯示不同情況 -->\n          <div class=\"h5\" v-if=\"product.price === product.origin_price\">\n            {{ product.price }} 元\n          </div>\n          <div v-else>\n            <del class=\"h6\">原價 {{ product.origin_price }} 元</del>\n            <div class=\"h5\">現在只要 {{ product.price }} 元</div>\n          </div>\n        </td>\n        <td>\n          <div class=\"btn-group btn-group-sm\">\n            <!-- 點擊時把id加進來 -->\n            <button\n              type=\"button\"\n              @click=\"openProductModal(product.id)\"\n              :disabled=\"isLoadingItem === product.id\"\n              class=\"btn btn-outline-secondary\"\n            >\n              查看更多\n            </button>\n            <!-- 新增判斷，如果是一樣的id為她套用disabled的狀態 -->\n            <button\n              type=\"button\"\n              @click=\"addToCart(product.id)\"\n              :disabled=\"isLoadingItem === product.id\"\n              class=\"btn btn-outline-danger\"\n            >\n              <!-- 加上讀取的按鈕，用v-show判斷觸發條件-->\n              <span\n                v-show=\"isLoadingItem === product.id\"\n                class=\"spinner-grow spinner-grow-sm\"\n              ></span>\n              加到購物車\n            </button>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n   <!-- 購物車列表 -->\n          <div class=\"text-end\">\n              <!-- 綁定刪除方法 -->\n            <button class=\"btn btn-outline-danger\" type=\"button\" @click=\"deleteAllCarts\">\n                <!-- 加上讀取的按鈕，用v-show判斷觸發條件-->\n                <span v-show=\"isLoadingItem\" class=\"spinner-grow spinner-grow-sm\"></span>\n                清空購物車</button>\n          </div>\n          <!-- 為了看購物車資訊有沒有成功在畫面上寫的 -->\n          <!-- <div>\n              {{ cartData }}\n          </div> -->\n          <table class=\"table align-middle\">\n            <thead>\n              <tr>\n                <th></th>\n                <th>品名</th>\n                <th style=\"width: 150px\">數量/單位</th>\n                <th>單價</th>\n              </tr>\n            </thead>\n            <tbody>\n                <!-- 購物車列表內容 -->\n              <template v-if=\"cartData.carts\">\n                <tr v-for=\"item in cartData.carts\" :key=\"item.id\">\n                  <td>\n                    <!-- 綁定移除方法 -->\n                    <button type=\"button\" :disabled=\"isLoadingItem === item.id\" @click=\"removeCartItem(item.id)\" class=\"btn btn-outline-danger btn-sm\">\n                      x\n                    </button>\n                  </td>\n                  <td>\n                    {{ item.product.title }}\n                    <!-- <div class=\"text-success\">\n                      已套用優惠券\n                    </div> -->\n                  </td>\n                  <td>\n                    <div class=\"input-group input-group-sm\">\n                      <div class=\"input-group mb-3\">\n                        <!-- 用v-model綁定數量 -->\n                        <!-- <input min=\"1\" type=\"number\" class=\"form-control\" v-model=\"item.qty\"> -->\n                        <select id=\"\" class=\"form-select\" v-model=\"item.qty\" @change=\"updateCartItem(item)\" :disabled=\"isLoadingItem === item.id\">\n                            <option :value=\"num\" v-for=\"num in 20\" :key=\"`${num}-${item.id}`\" >{{num}}</option>\n                        </select>\n                        <span class=\"input-group-text\" id=\"basic-addon2\">{{ item.product.unit }}</span>\n                      </div>\n                    </div>\n                  </td>\n                  <td class=\"text-end\">\n                    <!-- <small class=\"text-success\">折扣價：</small> -->\n                    {{ item.total  }}\n                  </td>\n                </tr>\n              </template>\n            </tbody>\n            <tfoot>\n              <tr>\n                <td colspan=\"3\" class=\"text-end\">總計</td>\n                <td class=\"text-end\">{{ cartData.total }}</td>\n              </tr>\n              <!-- <tr>\n                <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\n                <td class=\"text-end text-success\">{{  }}</td>\n              </tr> -->\n            </tfoot>\n          </table>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/libs/emitter'\n\nexport default {\n  data () {\n    return {\n      cartData: {},\n      products: [],\n      isLoadingItem: ''\n    }\n  },\n  methods: {\n    getProducts () {\n      this.$http.get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`).then((res) => {\n        console.log(res)\n        this.products = res.data.products\n      })\n    },\n    addToCart (id, qty = 1) {\n      const data = {\n        product_id: id,\n        qty\n      }\n      this.isLoadingItem = id\n      this.$http.post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`, { data }).then((res) => {\n        console.log(res)\n        this.isLoadingItem = ''\n        emitter.emit('get-cart')\n      })\n    }\n  },\n  mounted () {\n    this.getProducts()\n  }\n}\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=6f51b970\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/mac/Desktop/Vue-homework/w6/week6-homework/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["n","all","Map","on","t","e","i","get","push","set","off","splice","indexOf","emit","slice","map","emitter","mitt","class","_createElementVNode","style","id","colspan","_createElementBlock","_hoisted_2","_hoisted_4","_Fragment","_renderList","$data","product","key","backgroundImage","imageUrl","_toDisplayString","title","price","origin_price","_hoisted_7","type","onClick","_ctx","disabled","_hoisted_11","$options","_hoisted_19","carts","item","_hoisted_20","qty","$event","onChange","num","value","_hoisted_24","unit","total","_hoisted_27","data","cartData","products","isLoadingItem","methods","getProducts","this","$http","then","res","console","log","addToCart","product_id","post","mounted","__exports__","render"],"sourceRoot":""}